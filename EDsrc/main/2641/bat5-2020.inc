; === Auto-Generated Include File (using _ArrayAdd) ===
Global $aBat5_Lines
$aBat5_Lines = '' 
_ArrayAdd($aBat5_Lines, '@@ECHO OFF')
_ArrayAdd($aBat5_Lines, 'set "prj=tst29"')
_ArrayAdd($aBat5_Lines, ':: set prj MUST in LINE 2 :: ws edit src prj-name-dir ::')
_ArrayAdd($aBat5_Lines, 'REM *** IMPORTANT: The first 3 lines (including "set prj=...") used by  external software it interacts with.')
_ArrayAdd($aBat5_Lines, 'rem !!!DO NOT CHANGE!!! ***')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, 'SETLOCAL')
_ArrayAdd($aBat5_Lines, 'rem --- Global Configuration (set once) ---')
_ArrayAdd($aBat5_Lines, 'set "REPO_DIR=D:\ws\gitGit\source\workspaces\%prj%"')
_ArrayAdd($aBat5_Lines, 'set "BARE_DIR=D:\ws\gitGit\source\local-bare-repos\%prj%.git"')
_ArrayAdd($aBat5_Lines, 'set "BRANCH=main"')
_ArrayAdd($aBat5_Lines, 'set "REMOTE=origin"')
_ArrayAdd($aBat5_Lines, 'set "FOLDERS=EDsrc"')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, 'rem *** FIX #1: GITHUBURL wird als Basis-URL OHNE %prj% definiert, fuer die saubere Remote-Logik ***')
_ArrayAdd($aBat5_Lines, 'set "GITHUB_USER_URL=https://github.com/e6000000"')
_ArrayAdd($aBat5_Lines, 'set "FULL_REMOTE_URL=%GITHUB_USER_URL%/%prj%"')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, 'set "KEY_PATH=%USERPROFILE%\.ssh\id_ed25519" ')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, 'rem bevore gitpush copy gitPublic to 55My')
_ArrayAdd($aBat5_Lines, 'rem after gitFetch copy gitPriv to 55My')
_ArrayAdd($aBat5_Lines, 'mkdir  %REPO_DIR%\EDsrc\main\55My   2>nul ')
_ArrayAdd($aBat5_Lines, 'mkdir  %REPO_DIR%\EDsrc\gitPriv  2>nul ')
_ArrayAdd($aBat5_Lines, 'mkdir  %REPO_DIR%\EDsrc\gitPublic   2>nul ')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, 'mkdir  %BARE_DIR%       2>nul ')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, 'REM Check if a custom commit message was passed')
_ArrayAdd($aBat5_Lines, 'if "%COMMIT_MSG%"=="" (')
_ArrayAdd($aBat5_Lines, '    set "COMMIT_MSG=Auto-Commit %DATE% %TIME% see comments in file OLDCODE: NEWCODE: "')
_ArrayAdd($aBat5_Lines, ')')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, 'rem -------------------------------------------------------')
_ArrayAdd($aBat5_Lines, 'rem 1) TAG GENERATION WITH PSEUDO-VERSIONING (datim_YYMM.DDHH.MMSS)')
_ArrayAdd($aBat5_Lines, 'rem -------------------------------------------------------')
_ArrayAdd($aBat5_Lines, 'set "YY=%DATE:~2,2%"')
_ArrayAdd($aBat5_Lines, 'set "MON=%DATE:~5,2%"')
_ArrayAdd($aBat5_Lines, 'set "DAY=%DATE:~8,2%"')
_ArrayAdd($aBat5_Lines, 'set "H=%TIME:~0,2%"')
_ArrayAdd($aBat5_Lines, 'if "%H:~0,1%"==" " set "H=0%H:~1,1%"')
_ArrayAdd($aBat5_Lines, 'set "MIN=%TIME:~3,2%"')
_ArrayAdd($aBat5_Lines, 'set "SEC=%TIME:~6,2%"')
_ArrayAdd($aBat5_Lines, 'set /a BASEYY=24')
_ArrayAdd($aBat5_Lines, 'set /a yearsSince = YY - BASEYY')
_ArrayAdd($aBat5_Lines, 'if %yearsSince% LSS 0 set /a yearsSince=0')
_ArrayAdd($aBat5_Lines, 'set /a SEC_DAY=24*3600')
_ArrayAdd($aBat5_Lines, 'set /a SEC_MONTH=30*SEC_DAY')
_ArrayAdd($aBat5_Lines, 'set /a SEC_YEAR=360*SEC_DAY')
_ArrayAdd($aBat5_Lines, 'set /a mon = 1%MON% - 1')
_ArrayAdd($aBat5_Lines, 'set /a day = 1%DAY% - 1')
_ArrayAdd($aBat5_Lines, 'set /a hour = 1%H% - 1')
_ArrayAdd($aBat5_Lines, 'set /a minute = 1%MIN% - 1')
_ArrayAdd($aBat5_Lines, 'set /a second = 1%SEC% - 1')
_ArrayAdd($aBat5_Lines, 'set /a total = yearsSince*SEC_YEAR + mon*SEC_MONTH + day*SEC_DAY + hour*3600 + minute*60 + second')
_ArrayAdd($aBat5_Lines, 'set /a step = (total / 2) %% 1000000000')
_ArrayAdd($aBat1_Lines, 'set /a step = step -162766300')
_ArrayAdd($aBat1_Lines, 'rem add /4 because it is ok no need tooo big numbers qq66yy')
_ArrayAdd($aBat1_Lines, 'set /a step = (step / 4)')
_ArrayAdd($aBat1_Lines, 'rem add /4 because it is ok no need tooo big numbers qq66yy')
_ArrayAdd($aBat5_Lines, 'set /a step = step + 1000000')
_ArrayAdd($aBat5_Lines, 'echo ver NR.')
_ArrayAdd($aBat5_Lines, 'echo %step%')
_ArrayAdd($aBat5_Lines, 'set "num=000000000%step%"')
_ArrayAdd($aBat5_Lines, 'set "num=%num:~-9%"')
_ArrayAdd($aBat5_Lines, 'set "version=datim_%num:~0,3%.%num:~3,3%.%num:~6,3%"')
_ArrayAdd($aBat5_Lines, 'echo version: %version%')
_ArrayAdd($aBat5_Lines, 'set "TAG_NAME=%version%"')
_ArrayAdd($aBat5_Lines, 'echo Generated Tag Name: %TAG_NAME%')
_ArrayAdd($aBat5_Lines, 'set "TAG_MSG_USER=[2033]"')
_ArrayAdd($aBat5_Lines, 'echo.')
_ArrayAdd($aBat5_Lines, 'set /p TAG_MSG_USER="Enter a Tag Message (Default: Release %TAG_NAME%): "')
_ArrayAdd($aBat5_Lines, 'if "%TAG_MSG_USER%"=="" (')
_ArrayAdd($aBat5_Lines, '    set "TAG_MSG_USER=Release %TAG_NAME%"')
_ArrayAdd($aBat5_Lines, ')')
_ArrayAdd($aBat5_Lines, 'echo _ _')
_ArrayAdd($aBat5_Lines, 'echo  _ prj: %prj%    _ branch: %branch%')
_ArrayAdd($aBat5_Lines, 'echo  _ TAG_MSG_USER: %TAG_MSG_USER%   _ TAG_NAME: %TAG_NAME%')
_ArrayAdd($aBat5_Lines, 'echo _ _')
_ArrayAdd($aBat5_Lines, 'rem -------------------------------------------------------')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, 'rem Change to Repo directory')
_ArrayAdd($aBat5_Lines, 'if not exist "%REPO_DIR%\" (')
_ArrayAdd($aBat5_Lines, '  echo Repository directory "%REPO_DIR%" not found.')
_ArrayAdd($aBat5_Lines, '  timeout /t 222')
_ArrayAdd($aBat5_Lines, '  exit /b 1')
_ArrayAdd($aBat5_Lines, ')')
_ArrayAdd($aBat5_Lines, 'cd /d "%REPO_DIR%"')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, 'rem (Optional) Set Git SSH-Command')
_ArrayAdd($aBat5_Lines, 'set "GIT_SSH_COMMAND=ssh -i "%KEY_PATH%" -o IdentitiesOnly=yes"')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, 'rem #######################################################')
_ArrayAdd($aBat5_Lines, 'rem NEW: 3) CREATE BARE REPO IF NOT PRESENT')
_ArrayAdd($aBat5_Lines, 'rem #######################################################')
_ArrayAdd($aBat5_Lines, 'if not exist "%BARE_DIR%\" (')
_ArrayAdd($aBat5_Lines, '  echo.')
_ArrayAdd($aBat5_Lines, '  echo LOCAL BARE REPO "%BARE_DIR%" NOT FOUND.')
_ArrayAdd($aBat5_Lines, '  set "BARE_CREATE="')
_ArrayAdd($aBat5_Lines, '  if /I "y"=="y" (')
_ArrayAdd($aBat5_Lines, '    echo Creating Bare Repo in "%BARE_DIR%"...')
_ArrayAdd($aBat5_Lines, '    git init --bare "%BARE_DIR%"')
_ArrayAdd($aBat5_Lines, '    if errorlevel 1 (')
_ArrayAdd($aBat5_Lines, '      echo Bare Repo creation failed.')
_ArrayAdd($aBat5_Lines, '      timeout /t 222')
_ArrayAdd($aBat5_Lines, '      exit /b 1')
_ArrayAdd($aBat5_Lines, '    )')
_ArrayAdd($aBat5_Lines, '    echo Bare Repo successfully created.')
_ArrayAdd($aBat5_Lines, '  ) else (')
_ArrayAdd($aBat5_Lines, '    echo Bare Repo creation skipped.')
_ArrayAdd($aBat5_Lines, '  )')
_ArrayAdd($aBat5_Lines, ')')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, 'rem #######################################################')
_ArrayAdd($aBat5_Lines, 'rem NEW: 4) INITIALIZE ws REPO IF NOT PRESENT')
_ArrayAdd($aBat5_Lines, 'rem #######################################################')
_ArrayAdd($aBat5_Lines, 'git rev-parse --git-dir >nul 2>&1')
_ArrayAdd($aBat5_Lines, 'if errorlevel 1 (')
_ArrayAdd($aBat5_Lines, '  echo.')
_ArrayAdd($aBat5_Lines, '  echo Not a Git Repository in "%REPO_DIR%".')
_ArrayAdd($aBat5_Lines, '  if /I "y"=="y" (')
_ArrayAdd($aBat5_Lines, '    echo Initializing Repository with git init...')
_ArrayAdd($aBat5_Lines, '    ')
_ArrayAdd($aBat5_Lines, '    rem *** FIX: Stelle sicher, dass der initiale Branch ''main'' ist ***')
_ArrayAdd($aBat5_Lines, '    git config init.defaultBranch main ')
_ArrayAdd($aBat5_Lines, '    ')
_ArrayAdd($aBat5_Lines, '    git init')
_ArrayAdd($aBat5_Lines, '    if errorlevel 1 (')
_ArrayAdd($aBat5_Lines, '      echo Initialization failed.')
_ArrayAdd($aBat5_Lines, '      timeout /t 222')
_ArrayAdd($aBat5_Lines, '      exit /b 1')
_ArrayAdd($aBat5_Lines, '    )')
_ArrayAdd($aBat5_Lines, '    echo Repository successfully initialized.')
_ArrayAdd($aBat5_Lines, '  ) else (')
_ArrayAdd($aBat5_Lines, '    echo Initialization skipped. Script will exit.')
_ArrayAdd($aBat5_Lines, '    timeout /t 222')
_ArrayAdd($aBat5_Lines, '    exit /b 1')
_ArrayAdd($aBat5_Lines, '  )')
_ArrayAdd($aBat5_Lines, ')')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, 'rem #######################################################')
_ArrayAdd($aBat5_Lines, 'rem FIX: Ensure BRANCH is set to ''main'' (Nur fuer Repos, die noch master haben)')
_ArrayAdd($aBat5_Lines, 'rem #######################################################')
_ArrayAdd($aBat5_Lines, 'git symbolic-ref --short HEAD | findstr /I /C:"master" >nul 2>&1')
_ArrayAdd($aBat5_Lines, 'if not errorlevel 1 (')
_ArrayAdd($aBat5_Lines, '  git branch -m master main')
_ArrayAdd($aBat5_Lines, '  echo Renamed initial branch ''master'' to ''main''.')
_ArrayAdd($aBat5_Lines, ') else (')
_ArrayAdd($aBat5_Lines, '  git checkout %BRANCH% 2>nul')
_ArrayAdd($aBat5_Lines, ')')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, 'rem #######################################################')
_ArrayAdd($aBat5_Lines, 'rem FIX #2: KORREKTE REMOTE-LOGIK (Add ODER Set-URL)')
_ArrayAdd($aBat5_Lines, 'rem #######################################################')
_ArrayAdd($aBat5_Lines, 'echo Ensuring Remote ''%REMOTE%'' points to: %FULL_REMOTE_URL%')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, 'git remote add %REMOTE% %FULL_REMOTE_URL% 2>nul')
_ArrayAdd($aBat5_Lines, 'if errorlevel 1 (')
_ArrayAdd($aBat5_Lines, '  rem Remote existiert bereits. Setze die URL neu (FIX fuer die unvollstaendige URL)')
_ArrayAdd($aBat5_Lines, '  git remote set-url %REMOTE% %FULL_REMOTE_URL%')
_ArrayAdd($aBat5_Lines, '  echo Remote origin URL successfully updated to: %FULL_REMOTE_URL%')
_ArrayAdd($aBat5_Lines, ') else (')
_ArrayAdd($aBat5_Lines, '  echo Remote origin successfully added.')
_ArrayAdd($aBat5_Lines, ')')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, 'rem Add specified folders')
_ArrayAdd($aBat5_Lines, 'for %%F in (%FOLDERS%) do (')
_ArrayAdd($aBat5_Lines, '  if exist "%%F" (')
_ArrayAdd($aBat5_Lines, '    echo git add "%%F"')
_ArrayAdd($aBat5_Lines, '    git add "%%F"')
_ArrayAdd($aBat5_Lines, '  ) else (')
_ArrayAdd($aBat5_Lines, '    echo Folder "%%F" does not exist - skipping.')
_ArrayAdd($aBat5_Lines, '  )')
_ArrayAdd($aBat5_Lines, ')')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, 'rem check exist und call AutoIt EXE')
_ArrayAdd($aBat5_Lines, 'ECHO Rufe 5gitwebNEWprj.exe mit dem Parameter "%prj%" auf und warte...')
_ArrayAdd($aBat5_Lines, 'START /WAIT "" "D:\ws\gitGit\5gitwebNEWprj.exe" "%prj%"')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, 'IF ERRORLEVEL 1 (')
_ArrayAdd($aBat5_Lines, '    ECHO Fehler: 5gitwebNEWprj.exe wurde mit einem Fehlercode beendet.')
_ArrayAdd($aBat5_Lines, '    GOTO :ENDE')
_ArrayAdd($aBat5_Lines, ') ELSE (')
_ArrayAdd($aBat5_Lines, '    ECHO 5gitwebNEWprj.exe erfolgreich beendet.')
_ArrayAdd($aBat5_Lines, ')')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, 'rem Check if anything is staged, and CREATE COMMIT / TAG (Part 1)')
_ArrayAdd($aBat5_Lines, 'git diff --cached --quiet')
_ArrayAdd($aBat5_Lines, 'if errorlevel 1 (')
_ArrayAdd($aBat5_Lines, '  echo Changes are staged, creating Commit...')
_ArrayAdd($aBat5_Lines, '  git commit -m "%COMMIT_MSG%"')
_ArrayAdd($aBat5_Lines, '  if errorlevel 1 (')
_ArrayAdd($aBat5_Lines, '    echo Commit failed.')
_ArrayAdd($aBat5_Lines, '    timeout /t 222')
_ArrayAdd($aBat5_Lines, '    exit /b 1')
_ArrayAdd($aBat5_Lines, '  )')
_ArrayAdd($aBat5_Lines, '  echo Commit successful.')
_ArrayAdd($aBat5_Lines, '  echo.')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, '  rem Create tag with custom message')
_ArrayAdd($aBat5_Lines, '  echo  * creating Tag %TAG_NAME% with message "%TAG_MSG_USER%"...')
_ArrayAdd($aBat5_Lines, '  git tag -a "%TAG_NAME%" -m "%TAG_MSG_USER%"')
_ArrayAdd($aBat5_Lines, '  if errorlevel 1 (')
_ArrayAdd($aBat5_Lines, '    echo Tag creation failed.')
_ArrayAdd($aBat5_Lines, '    timeout /t 222')
_ArrayAdd($aBat5_Lines, '    exit /b 1')
_ArrayAdd($aBat5_Lines, '  )')
_ArrayAdd($aBat5_Lines, '  echo Tag %TAG_NAME% successfully created.')
_ArrayAdd($aBat5_Lines, '  echo.')
_ArrayAdd($aBat5_Lines, '  ')
_ArrayAdd($aBat5_Lines, '  rem #######################################################')
_ArrayAdd($aBat5_Lines, '  rem START: BARE-REPO PUSH (Part 1: Push to local Bare Repo)')
_ArrayAdd($aBat5_Lines, '  rem #######################################################')
_ArrayAdd($aBat5_Lines, '  echo WARNING: Now pushing to local Bare Repo %BARE_DIR%.')
_ArrayAdd($aBat5_Lines, '  if /I "y"=="y" (')
_ArrayAdd($aBat5_Lines, '    echo Pushing Branch %BRANCH% to %BARE_DIR% ...')
_ArrayAdd($aBat5_Lines, '    git push "%BARE_DIR%" %BRANCH%')
_ArrayAdd($aBat5_Lines, '    if errorlevel 1 (')
_ArrayAdd($aBat5_Lines, '      echo Push of Branch to BARE_DIR failed.')
_ArrayAdd($aBat5_Lines, '      timeout /t 222')
_ArrayAdd($aBat5_Lines, '      exit /b 1')
_ArrayAdd($aBat5_Lines, '    )')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, '    rem Push Tags')
_ArrayAdd($aBat5_Lines, '    echo Pushing Tag %TAG_NAME% to %BARE_DIR%...')
_ArrayAdd($aBat5_Lines, '    git push "%BARE_DIR%" "%TAG_NAME%"')
_ArrayAdd($aBat5_Lines, '    if errorlevel 1 (')
_ArrayAdd($aBat5_Lines, '      echo Push of Tag to BARE_DIR failed.')
_ArrayAdd($aBat5_Lines, '      timeout /t 222')
_ArrayAdd($aBat5_Lines, '      exit /b 1')
_ArrayAdd($aBat5_Lines, '    )')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, '    echo  ..')
_ArrayAdd($aBat5_Lines, '    echo ########################################')
_ArrayAdd($aBat5_Lines, '    echo Push and Tag Push to BARE_DIR successful.')
_ArrayAdd($aBat5_Lines, '    echo  .. ')
_ArrayAdd($aBat5_Lines, '  ) else (')
_ArrayAdd($aBat5_Lines, '    echo BARE Push aborted.')
_ArrayAdd($aBat5_Lines, '  )')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, '  rem #######################################################')
_ArrayAdd($aBat5_Lines, '  rem START: REMOTE PUSH (Part 2: Push to external Remote %REMOTE%)')
_ArrayAdd($aBat5_Lines, '  rem #######################################################')
_ArrayAdd($aBat5_Lines, '  echo.')
_ArrayAdd($aBat5_Lines, '  echo WARNING: In the next step, a force-push to REMOTE %REMOTE% will be executed.')
_ArrayAdd($aBat5_Lines, '  if /I "y"=="y" (')
_ArrayAdd($aBat5_Lines, '    echo Pushing Branch %BRANCH% to %REMOTE% --force ...')
_ArrayAdd($aBat5_Lines, '    git push %REMOTE% %BRANCH% --force')
_ArrayAdd($aBat5_Lines, '    if errorlevel 1 (')
_ArrayAdd($aBat5_Lines, '      echo Push of Branch to %REMOTE% failed.')
_ArrayAdd($aBat5_Lines, '      timeout /t 222')
_ArrayAdd($aBat5_Lines, '      exit /b 1')
_ArrayAdd($aBat5_Lines, '    )')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, '    rem Push Tags')
_ArrayAdd($aBat5_Lines, '    echo Pushing Tag %TAG_NAME% to %REMOTE%...')
_ArrayAdd($aBat5_Lines, '    git push %REMOTE% "%TAG_NAME%"')
_ArrayAdd($aBat5_Lines, '    if errorlevel 1 (')
_ArrayAdd($aBat5_Lines, '      echo Push of Tag to %REMOTE% failed.')
_ArrayAdd($aBat5_Lines, '      timeout /t 222')
_ArrayAdd($aBat5_Lines, '      exit /b 1')
_ArrayAdd($aBat5_Lines, '    )')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, '    echo  ..')
_ArrayAdd($aBat5_Lines, '    echo ########################################')
_ArrayAdd($aBat5_Lines, '    echo Force-push and Tag Push to REMOTE %REMOTE% successful.')
_ArrayAdd($aBat5_Lines, '    echo  ..')
_ArrayAdd($aBat5_Lines, '  ) else (')
_ArrayAdd($aBat5_Lines, '    echo REMOTE Push aborted. No push executed.')
_ArrayAdd($aBat5_Lines, '  )')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, ') else (')
_ArrayAdd($aBat5_Lines, '  echo No changes to commit.')
_ArrayAdd($aBat5_Lines, ')')
_ArrayAdd($aBat5_Lines, '')
_ArrayAdd($aBat5_Lines, ':ENDE')
_ArrayAdd($aBat5_Lines, 'timeout /t 222')
_ArrayAdd($aBat5_Lines, 'ENDLOCAL')
_ArrayAdd($aBat5_Lines, 'exit /b 0')

; === End of Auto-Generated Include File (using _ArrayAdd) ===
